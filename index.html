<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minezwall - Telegram Mini App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <script src='//libtl.com/sdk.js' data-zone='9662480' data-sdk='show_9662480'></script>

    <div class="container">
        <div class="header">
            <div class="header-left" id="headerLeft">
                <div class="dropdown" id="dropdownMenu">
                    <button class="menu-button">☰</button>
                    <div class="dropdown-content">
                        <button onclick="showPage('withdraw')">Withdraw</button>
                        <button onclick="showPage('settings')">Settings</button>
                    </div>
                </div>
            </div>
            <div class="header-center" id="headerCenter">
                <div class="game-title">Minezwall</div>
            </div>
            <div class="header-right" id="headerRight">
                <button class="daily-bonus" onclick="claimDailyBonus()">Daily Bonus</button>
            </div>
        </div>
        
        <div id="restrictionPage" class="page">
            <div class="restriction-page">
                <div class="restriction-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h2 class="restriction-title">Access Restricted</h2>
                <p class="restriction-message">
                    To play Minezwall and start earning, you must join our official Telegram channel first.
                    After joining, please click the verification button below.
                </p>
                <a href="https://t.me/minezwallofficial" class="telegram-button" target="_blank">
                    <i class="fab fa-telegram"></i> Join Channel
                </a>
                <button class="check-button" onclick="verifyChannelJoin()">
                    <i class="fas fa-check-circle"></i> I've Joined
                </button>
            </div>
        </div>
        
        <div id="homePage" class="page">
            <h1 class="game-title">MINEZWALL</h1>
            <div class="username-display" id="usernameDisplay">Welcome, Player!</div>
            <button class="start-button pulse" onclick="startGame()">START GAME</button>
        </div>
        
        <div id="gamePage" class="page">
            <div class="header">
                <div class="header-left">
                    <button class="back-button" onclick="showPage('home')">←</button>
                </div>
                <div class="header-center">
                    <div class="game-title">Level: <span id="currentLevel">1</span></div>
                </div>
                <div class="header-right"></div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-label">COINS</div>
                    <div class="stat-value" id="coinDisplay">150</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">USD BALANCE</div>
                    <div class="stat-value" id="usdDisplay">$0.000</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">DIAMONDS FOUND</div>
                    <div class="stat-value" id="diamondsFound">0/4</div>
                </div>
            </div>
            
            <div class="game-grid" id="gameGrid"></div>
            
            <div class="game-controls">
                <button class="control-button skip-ad" onclick="skipWithAd()">
                    <i class="fas fa-ad"></i> Skip with Ad
                </button>
                <button class="control-button skip-coin" onclick="skipWithCoins()">
                    <i class="fas fa-coins"></i> Skip with Coins
                </button>
                <button class="control-button restart" onclick="restartLevel()">
                    <i class="fas fa-redo"></i> Restart
                </button>
            </div>
        </div>
        
        <div id="withdrawPage" class="page">
            <div class="header">
                <div class="header-left">
                    <button class="back-button" onclick="showPage('home')">←</button>
                </div>
                <div class="header-center">
                    <div class="game-title">Withdraw</div>
                </div>
                <div class="header-right"></div>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-label">USD BALANCE</div>
                    <div class="stat-value" id="withdrawUsdDisplay">$0.000</div>
                </div>
            </div>
            
            <div class="withdraw-form">
                <div class="input-group">
                    <label for="withdrawAmount">Amount to Withdraw (USD)</label>
                    <input type="number" id="withdrawAmount" placeholder="Minimum $5.000" min="5.000" step="0.001">
                </div>
                
                <div class="input-group">
                    <label for="withdrawMethod">Withdrawal Method</label>
                    <select id="withdrawMethod">
                        <option value="usdt">USDT (Polygon Network)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="walletAddress">Wallet Address</label>
                    <input type="text" id="walletAddress" placeholder="Enter your wallet address">
                </div>
                
                <button class="submit-button" onclick="processWithdrawal()">Withdraw Funds</button>
            </div>
        </div>
        
        <div id="settingsPage" class="page">
            <div class="header">
                <div class="header-left">
                    <button class="back-button" onclick="showPage('home')">←</button>
                </div>
                <div class="header-center">
                    <div class="game-title">Settings</div>
                </div>
                <div class="header-right"></div>
            </div>
            
            <div class="settings-item">
                <div><i class="fas fa-volume-up"></i> Sound Effects</div>
                <label class="toggle-switch">
                    <input type="checkbox" id="soundToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="settings-item">
                <div><i class="fas fa-music"></i> Background Music</div>
                <label class="toggle-switch">
                    <input type="checkbox" id="musicToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="settings-item">
                <div><i class="fas fa-palette"></i> Theme</div>
                <select id="themeSelect" onchange="changeTheme()">
                    <option value="dark">Dark Mode</option>
                    <option value="light">Light Mode</option>
                </select>
            </div>
            
            <div class="settings-item">
                <div><i class="fas fa-cog"></i> Difficulty</div>
                <select id="difficultySelect" onchange="changeDifficulty()">
                    <option value="easy">Easy</option>
                    <option value="medium">Medium</option>
                    <option value="hard">Hard</option>
                </select>
            </div>
        </div>
        
        <div class="footer">
            Minewall Mini App © 2025 | Play and Earn
        </div>
    </div>
    
    <div class="modal" id="winModal">
        <div class="modal-content">
            <h2>Congratulations!</h2>
            <p>You found all diamonds and completed the level!</p>
            <p>Reward: +$0.005 USD</p>
            <button class="modal-button" onclick="nextLevel()">Next Level</button>
        </div>
    </div>
    
    <div class="modal" id="loseModal">
        <div class="modal-content">
            <h2>Game Over!</h2>
            <p>You hit a mine. Try again or skip the level.</p>
            <div style="display: flex; justify-content: center; margin-top: 20px;">
                <button class="modal-button" style="background: linear-gradient(to right, #ff8a00, #e52e71);" onclick="skipWithAd()">Skip with Ad</button>
                <button class="modal-button" style="background: linear-gradient(to right, #00b09b, #96c93d);" onclick="skipWithCoins()">Skip with Coins</button>
                <button class="modal-button" style="background: linear-gradient(to right, #1d976c, #93f9b9);" onclick="restartLevel()">Restart Level</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="dailyBonusModal">
        <div class="modal-content">
            <h2>Daily Bonus!</h2>
            <p>You received 15 coins!</p>
            <button class="modal-button" onclick="closeModal('dailyBonusModal')">Claim</button>
        </div>
    </div>
    
    <div class="modal" id="withdrawalSuccessModal">
        <div class="withdrawal-success-modal">
            <h2>Withdrawal Request Received!</h2>
            <p>Your withdrawal request has been submitted successfully.</p>
            <p>Please complete our verification form to process your payment.</p>
            <button class="form-redirect-button" onclick="redirectToGoogleForm()">
                Complete Verification Form
            </button>
        </div>
    </div>
    
    <audio id="backgroundMusic" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-waiting-667.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>
    <audio id="winSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="loseSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-losing-drums-2023.mp3" type="audio/mpeg">
    </audio>
    
    <script src="script.js"></script>
</body>
</html>
